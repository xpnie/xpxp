c
FUNCTION_BLOCK LEAPYEARCHECKER
VAR_INPUT
    YEAR : INT;
END_VAR
VAR_OUTPUT
    ISLEAPYEAR : BOOL;
END_VAR
VAR
    DAYOFMONTH : INT;
    DAYSINMONTH : INT;
    MONTHSINYEAR : INT;
END_VAR
ISLEAPYEAR := FALSE;
DAYOFMONTH := 1;
DAYSINMONTH := 31;
MONTHSINYEAR := 12;
REPEAT
    IF DAYSINMONTH = 29 THEN
        ISLEAPYEAR := TRUE;
    END_IF;
    DAYOFMONTH := DAYOFMONTH + 1;
    DAYSINMONTH := DAYSINMONTH + 1;
    MONTHSINYEAR := MONTHSINYEAR - 1;
UNTIL (MONTHSINYEAR = 0);
END_REPEAT;
IF ISLEAPYEAR THEN
    CASE YEAR OF
        2000: ISLEAPYEAR := TRUE;
        1900: ISLEAPYEAR := FALSE;
        2004: ISLEAPYEAR := TRUE;
        ELSE
            ISLEAPYEAR := FALSE;
    END_CASE;
END_IF;